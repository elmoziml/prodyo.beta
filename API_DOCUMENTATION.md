# API Documentation

This document provides details on the available API endpoints for the application.

---

## 1. Categories API

Handles CRUD operations for product categories.

**Target File:** `src/lib/data/categories.json`

### GET /api/categories

-   **Description:** Retrieves a list of all categories.
-   **Request:** None.
-   **Response:** An array of `Category` objects.
    ```json
    [
      {
        "id": "cat-1",
        "name": "Apparel",
        "description": "Clothing and wearable items"
      }
    ]
    ```

### POST /api/categories

-   **Description:** Creates a new category.
-   **Request Body:**
    ```json
    {
      "name": "New Category Name",
      "description": "A description for the new category."
    }
    ```
-   **Response:** The newly created `Category` object with a generated ID.

### GET /api/categories/[id]

-   **Description:** Retrieves a single category by its ID.
-   **Request Parameter:** `id` (string) in the URL path.
-   **Response:** A single `Category` object.

### PUT /api/categories/[id]

-   **Description:** Updates an existing category.
-   **Request Parameter:** `id` (string) in the URL path.
-   **Request Body:**
    ```json
    {
      "name": "Updated Category Name",
      "description": "An updated description."
    }
    ```
-   **Response:** The updated `Category` object.

### DELETE /api/categories/[id]

-   **Description:** Deletes a category by its ID.
-   **Request Parameter:** `id` (string) in the URL path.
-   **Response:** `204 No Content` on success.

---

## 2. Products API

Handles operations for products.

### GET /api/products

-   **Description:** Retrieves a summarized list of all products for table views.
-   **Target File:** `src/lib/data/products.json`
-   **Request:** None.
-   **Response:** An array of `ProductSummary` objects.
    ```json
    [
      {
        "id": "prod-1",
        "name": "Classic T-Shirt",
        "category_id": "cat-1",
        "price": 25.99,
        "stock": 150
      }
    ]
    ```

### POST /api/products

-   **Description:** Creates a new product. This endpoint writes to two separate files.
-   **Target Files:** 
    -   `src/lib/data/product-details.json` (for the full object)
    -   `src/lib/data/products.json` (for the summary object)
-   **Request Body:** A full `Product` object (including `name`, `description`, `price`, `stock`, `category_id`, `images`, `available_options`).
-   **Response:** The newly created full `Product` object.

### GET /api/products/[id]

-   **Description:** Retrieves the full details of a single product by its ID.
-   **Target File:** `src/lib/data/product-details.json`
-   **Request Parameter:** `id` (string) in the URL path.
-   **Response:** A single full `Product` object.

### PUT /api/products/[id]

-   **Description:** Updates an existing product. This endpoint updates both the details and the summary files.
-   **Target Files:** 
    -   `src/lib/data/product-details.json`
    -   `src/lib/data/products.json`
-   **Request Parameter:** `id` (string) in the URL path.
-   **Request Body:** A partial or full `Product` object with the fields to be updated.
    ```json
    {
      "name": "Updated T-Shirt Name",
      "price": 29.99,
      "stock": 120
    }
    ```
-   **Response:** The updated full `Product` object.

### DELETE /api/products/[id]

-   **Description:** Deletes a product. This endpoint removes the product from both the details and the summary files.
-   **Target Files:** 
    -   `src/lib/data/product-details.json`
    -   `src/lib/data/products.json`
-   **Request Parameter:** `id` (string) in the URL path.
-   **Response:** `204 No Content` on success.

### GET /api/products/category/[categoryId]

-   **Description:** Retrieves all products that belong to a specific category.
-   **Target File:** `src/lib/data/products.json`
-   **Request Parameter:** `categoryId` (string) in the URL path.
-   **Response:** An array of `Product` objects filtered by category ID.
    ```json
    [
      {
        "id": "prod-1",
        "name": "Classic T-Shirt",
        "category_id": "cat-1",
        "price": 25.99,
        "stock": 150,
        "description": "A comfortable cotton t-shirt",
        "images": [],
        "available_options": {}
      }
    ]
    ```
-   **Example Usage:** 
    -   `GET /api/products/category/cat-1` - Returns all products in category "cat-1"
    -   `GET /api/products/category/cat-2` - Returns all products in category "cat-2"

---

## 3. Orders API

Handles operations for customer orders.

**Target File:** `src/lib/data/orders.json`

### GET /api/orders

-   **Description:** Retrieves a list of all orders.
-   **Request:** None.
-   **Response:** An array of `Order` objects.

### POST /api/orders

-   **Description:** Creates a new order.
-   **Request Body:** An `Order` object. The `id`, `display_id`, `order_date`, and `status` are generated by the server.
    ```json
    {
      "customer_id": "cust-1",
      "total_amount": 199.99,
      "customer": {
        "id": "cust-1",
        "full_name": "John Doe",
        "email": "john.doe@example.com",
        "phone": "123-456-7890",
        "address": "123 Main St, Anytown, USA"
      }
    }
    ```
-   **Response:** The newly created `Order` object.

### GET /api/orders/[id]

-   **Description:** Retrieves the details of a single order, including its line items.
-   **Target Files:** 
    -   `src/lib/data/orders.json`
    -   `src/lib/data/order_items.json`
    -   `src/lib/data/products.json`
-   **Request Parameter:** `id` (string) in the URL path.
-   **Response:** A single detailed `Order` object with an `items` array.

### PUT /api/orders/[id]

-   **Description:** Updates the status of an existing order.
-   **Request Parameter:** `id` (string) in the URL path.
-   **Request Body:**
    ```json
    {
      "status": "Shipped"
    }
    ```
-   **Response:** The updated `Order` object.
